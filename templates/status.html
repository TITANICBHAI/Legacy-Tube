{% extends "base.html" %}

{% block title %}Conversion Status{% endblock %}

{% block meta %}
{% if file_status.status == 'downloading' or file_status.status == 'converting' %}
<meta http-equiv="refresh" content="30">
{% endif %}
{% endblock %}

{% block content %}
<h1>Conversion Status</h1>

{% if file_status.status == 'downloading' or file_status.status == 'converting' %}
<div class="status">
<p class="center"><strong>&#x231B; PROCESSING YOUR VIDEO...</strong></p>
<p class="center" style="font-size: 16px; font-weight: bold;">Please Wait</p>
<p>{{ file_status.progress }}</p>
</div>

<div class="info">
<p class="center"><strong>&#x1F551; How long will this take?</strong></p>
<ul>
<li><strong>5-10 min video:</strong> 1-3 minutes</li>
<li><strong>30-60 min video:</strong> 5-15 minutes</li>
<li><strong>2-3 hour video:</strong> 30-90 minutes</li>
<li><strong>4-6 hour video:</strong> 2-4 hours</li>
</ul>
</div>

<div class="success" style="background: #e8f4f8; border-color: #4a90a4;">
<p class="center"><strong>&#x2139; This page auto-refreshes every 30 seconds</strong></p>
<p class="center">Download button appears when ready</p>
<p class="center"><em>You can close this tab and come back later</em></p>
</div>

<form method="GET" action="/status/{{ file_id }}">
<button type="submit">&#x21BB; Check Status Now</button>
</form>

{% elif file_status.status == 'completed' %}
<div class="success">
<p class="center"><strong>&#x2713; READY TO DOWNLOAD!</strong></p>
<p class="center" style="font-size: 16px; font-weight: bold;">Your file is ready</p>
<p>{{ file_status.progress }}</p>
</div>

<a href="/download/{{ file_id }}" class="button" style="background: #4a904a; font-size: 16px; padding: 15px;">&#x2B07; DOWNLOAD NOW</a>

<div class="info">
<p class="center"><strong>Download Tips:</strong></p>
<ul>
<li>&#x2713; Click button above to download</li>
<li>&#x2713; File available for 6 hours</li>
<li>&#x2713; Works on 2G networks</li>
<li>&#x2713; Ready for feature phones</li>
</ul>
<p class="center" style="margin-top: 10px;"><strong>Bookmark this page to download later</strong></p>
</div>

<hr>
<a href="/" class="button">Convert Another Video</a>

{% elif file_status.status == 'failed' %}
<div class="error">
<p class="center"><strong>&#x2717; CONVERSION FAILED</strong></p>
<p>{{ file_status.progress }}</p>
</div>

<a href="/" class="button" style="background: #a44a4a;">&#x21BB; Try Again (New Video)</a>

<div class="info">
<p class="center"><strong>What to try:</strong></p>
<ul>
<li><strong>1.</strong> Wait 5-10 minutes and try again</li>
<li><strong>2.</strong> Check if video is public and not deleted</li>
<li><strong>3.</strong> Try a shorter video (under 1 hour)</li>
<li><strong>4.</strong> Upload cookies at <a href="/cookies" style="color: #4a90a4; font-weight: bold;">/cookies page</a></li>
<li><strong>5.</strong> Video may be age-restricted or geo-blocked</li>
</ul>
</div>

<div class="info" style="background: #fff9e6; border-color: #d4a017;">
<p class="center"><strong>&#x26A0; Getting blocked by YouTube?</strong></p>
<p class="center">Upload your browser cookies to bypass blocks</p>
<p class="center"><a href="/cookies" class="button" style="display: inline-block; width: auto; padding: 8px 15px; margin: 5px;">Go to Cookie Upload</a></p>
</div>

{% else %}
<div class="error">
<p class="center">Status unknown</p>
<p>File not found or expired</p>
</div>

<a href="/" class="button">Go Home</a>
{% endif %}

{% endblock %}
