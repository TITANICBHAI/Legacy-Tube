{% extends "base.html" %}

{% block title %}Search YouTube - Feature Phone{% endblock %}

{% block content %}
<h1>Search YouTube</h1>

<form method="POST" action="/search">
<p><strong>Search for videos:</strong></p>
<input type="text" name="query" placeholder="Enter search term..." value="{{ query }}" required>
<button type="submit">Search</button>
</form>

<p class="center"><a href="/">Back to Converter</a></p>

<hr>

{% if results is not none %}
  {% if results|length > 0 %}
    <div class="info">
    <h2>Results for "{{ query }}":</h2>
    </div>
    
    {% for video in results %}
    <div class="status">
    <p><strong>{{ loop.index }}. {{ video.title }}</strong></p>
    <p style="font-size: 12px; color: #666;">
    Channel: {{ video.channel }}<br>
    Uploaded: {{ video.upload_date }} | {{ video.views }}<br>
    Duration: {{ video.duration }}
    </p>
    
    <form method="POST" action="/convert" style="margin: 5px 0;">
    <input type="hidden" name="url" value="{{ video.url }}">
    <p style="margin: 5px 0;">
    <input type="radio" name="format" value="3gp" id="v{{ loop.index }}_3gp" checked>
    <label for="v{{ loop.index }}_3gp">3GP</label>
    <input type="radio" name="format" value="mp3" id="v{{ loop.index }}_mp3">
    <label for="v{{ loop.index }}_mp3">MP3</label>
    </p>
    
    <p style="font-size: 12px; margin: 5px 0;"><strong>3GP Quality:</strong></p>
    <select name="video_quality" style="width: 100%; padding: 5px; margin: 5px 0; font-size: 12px;">
    <option value="auto">Auto (Low)</option>
    <option value="ultralow">Ultra Low (~2.3MB/5min)</option>
    <option value="low">Low (~3.2MB/5min)</option>
    <option value="medium">Medium (~4.6MB/5min)</option>
    <option value="high">High (~6MB/5min)</option>
    </select>
    
    <p style="font-size: 12px; margin: 5px 0;"><strong>MP3 Quality:</strong></p>
    <select name="mp3_quality" style="width: 100%; padding: 5px; margin: 5px 0; font-size: 12px;">
    <option value="auto">Auto (128kbps)</option>
    <option value="medium">128kbps (~5MB/5min)</option>
    <option value="high">192kbps (~7MB/5min)</option>
    <option value="veryhigh">256kbps (~9MB/5min)</option>
    <option value="extreme">320kbps (~12MB/5min)</option>
    </select>
    
    <button type="submit">Convert This</button>
    </form>
    </div>
    {% endfor %}
    
  {% else %}
    <div class="error">
    <p>No results found for "{{ query }}"</p>
    <p>Try different search terms</p>
    </div>
  {% endif %}
{% else %}
  <div class="info">
  <h2>How to search:</h2>
  <ul>
  <li>Enter song, artist, or video name</li>
  <li>Shows title and duration</li>
  <li>Choose format and convert</li>
  <li>Works without YouTube API</li>
  </ul>
  </div>
{% endif %}

{% endblock %}
